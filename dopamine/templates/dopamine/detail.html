{% extends "dopamine/base.html" %}
{% load static %}
{% load humanize %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'dopamine/css/detail.css' %}">
<style>
  .product-card {
    transition: box-shadow 0.3s ease;
  }
  .product-card:hover {
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  }
  .rating-stars {
    color: #ffc107;
    font-size: 18px;
  }
  .status {
    font-weight: bold;
    color: green;
  }
</style>
{% endblock %}

{% block content %}
<div class="container py-5" style="padding-bottom: 60px;">
  <div class="row justify-content-center align-items-center">
    <div class="col-lg-5 col-md-6 mb-4">
      <div class="rounded-4 shadow-sm p-4 text-center bg-white product-card">
        <img src="{{ product.ImageProduct }}" alt="{{ product.name }}" class="img-fluid rounded-3" style="max-height: 300px; object-fit: contain;">
      </div>
    </div>
    <div class="col-lg-7 col-md-6">
      <div class="rounded-4 shadow-sm p-4 bg-white product-card">
        <span class="text-uppercase text-muted small">DopamineFoods</span>
        <h2 class="fw-bold text-success">{{ product.name }}</h2>

        <!-- ƒê√°nh gi√° sao -->
        <div class="rating-stars mb-2">
          ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ
          <small class="text-muted">(24 ƒë√°nh gi√°)</small>
        </div>

        <!-- Gi√° v√† ƒë∆°n v·ªã -->
        <p class="fs-5 text-dark mb-1">
          <strong class="text-danger">{{ product.price|floatformat:"g"|intcomma }} ƒë</strong> / {{ product.unit }}
        </p>

        <!-- T√¨nh tr·∫°ng -->
        <p class="status mb-3">‚úîÔ∏è C√≤n h√†ng</p>

        <!-- M√¥ t·∫£ -->
        <p class="text-muted mt-3">{{ product.detail|default:"Kh√¥ng c√≥ m√¥ t·∫£ cho s·∫£n ph·∫©m n√†y." }}</p>

        <!-- H√†nh ƒë·ªông -->
        <div class="mt-4 d-flex gap-3 flex-wrap">
          <a href="{% url 'add_to_cart' product.id %}" class="btn btn-success px-4 py-2 rounded-pill shadow-sm">
            üõí Th√™m v√†o gi·ªè h√†ng
          </a>
          <button class="btn btn-outline-danger px-4 py-2 rounded-pill shadow-sm" disabled>
            ‚ù§Ô∏è Y√™u th√≠ch
          </button>
          <button class="btn btn-outline-primary px-4 py-2 rounded-pill shadow-sm" disabled>
            üîó Chia s·∫ª
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- G·ª£i √Ω s·∫£n ph·∫©m li√™n quan -->
 <div class="container mt-5">
  <h4 class="text-success mb-3">S·∫£n ph·∫©m li√™n quan</h4>
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4 g-4">
    {% for sp in related_products %}
    <div class="col">
      <div class="card h-100 shadow-sm">
        <img src="{{ sp.ImageProduct }}" class="card-img-top" alt="{{ sp.name }}" style="height: 180px; object-fit: contain;">
        <div class="card-body">
          <h6 class="card-title text-success">{{ sp.name }}</h6>
          <p class="card-text text-danger fw-bold">{{ sp.price|floatformat:"g"|intcomma }} ƒë / {{ sp.unit }}</p>
          <a href="{% url 'detail' sp.id %}" class="btn btn-outline-success btn-sm rounded-pill">Xem chi ti·∫øt</a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
</div>
{% endblock content %}
